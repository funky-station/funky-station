# SPDX-FileCopyrightText: 2025 Tay <td12233a@gmail.com>
# SPDX-FileCopyrightText: 2025 taydeo <td12233a@gmail.com>
#
# SPDX-License-Identifier: AGPL-3.0-or-later AND MIT


# Needs testing
- type: entity
  parent: BaseWizardRule
  id: SubWizard
  components:
  - type: AntagSelection
    agentName: wizard-round-end-name
    selectionTime: PrePlayerSpawn
    definitions:
    - prefRoles: [ Wizard ]
      max: 1
      playerRatio: 1
      spawnerPrototype: SpawnPointGhostWizard
      roleLoadout:
      - RoleSurvivalExtended
      briefing:
        text: wizard-role-greeting
        color: Turquoise
        # TODO: Need Wizard Start sound
        #sound: "/Audio/Ambience/Antag/wizard_start.ogg"
      startingGear: WizardBlueGear
      # TODO: WizardComp as needed
      components:
      - type: NpcFactionMember
        factions:
        - Wizard
      - type: RandomMetadata
        nameSegments:
        - NamesWizardFirst
        - NamesWizardLast
        nameFormat: name-format-wizard
      mindRoles:
      - MindRoleWizard

- type: entity
  parent: BaseGameRule
  id: Xenoborgs
  components:
  - type: XenoborgsRule
  - type: RuleGrids
  - type: GameRule
    minPlayers: 40
  - type: LoadMapRule
    gridPath: /Maps/Shuttles/mothership.yml
  - type: AntagMultipleRoleSpawner
    antagRoleToPrototypes:
      MothershipCore: [ MothershipCore ]
      Xenoborg: [ XenoborgEngi, XenoborgHeavy, XenoborgScout, XenoborgStealth ]
    pickAndTake: true
  - type: AntagSelection
    selectionTime: PrePlayerSpawn
    definitions:
    - prefRoles: [ MothershipCore ]
      fallbackRoles: [ Xenoborg ]
      spawnerPrototype: SpawnPointGhostRoleMothershipCore
      mindRoles:
      - MindRoleMothershipCore
    - prefRoles: [ Xenoborg ]
      fallbackRoles: [ MothershipCore ]
      spawnerPrototype: SpawnPointGhostRoleXenoborg
      mindRoles:
      - MindRoleXenoborg
      min: 4
      max: 4
  - type: DynamicRuleCost
    cost: 200
