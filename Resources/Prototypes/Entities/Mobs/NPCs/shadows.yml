# SPDX-FileCopyrightText: 2024 Ed <96445749+TheShuEd@users.noreply.github.com>
# SPDX-FileCopyrightText: 2025 taydeo <td12233a@gmail.com>
#
# SPDX-License-Identifier: MIT

- type: entity
  id: BaseShadowMob
  abstract: true
  parent: [ BaseMob, BaseShadow ]
  components:
  - type: PointLight
    color: "#793a80dd"
    radius: 1.1
  - type: MovementSpeedModifier
    baseWalkSpeed: 2
    baseSprintSpeed: 2
  - type: Fixtures
    fixtures:
      fix1:
        shape:
          !type:PhysShapeCircle
          radius: 0.35
        density: 120
        mask:
        - Opaque
        layer:
        - None
  - type: StandingState
  - type: Tag
    tags:
    - DoorBumpOpener
  - type: NpcFactionMember
    factions:
    - SimpleNeutral
  - type: HTN
    rootTask:
      task: IdleCompound
  - type: SlowOnDamage
    speedModifierThresholds:
      60: 0.7
      80: 0.5
      
- type: entity
  name: shadow cat
  parent: BaseShadowMob
  id: MobCatShadow
  description: A lovely piece of darkness. Hope he doesn't bring you a curse.
  components:
  - type: Sprite
    sprite: Mobs/Pets/cat.rsi
    layers:
    - map: ["enum.DamageStateVisualLayers.Base"]
      state: cat
      color: "#793a80dd"
  - type: Physics
  - type: ReplacementAccent
    accent: cat
  - type: InteractionPopup
    successChance: 0.01 # you cant pet shadow cat... almost
    interactSuccessString: petting-success-cat
    interactFailureString: petting-failure-shadow
    interactSuccessSpawn: EffectHearts
    interactSuccessSound:
      path: /Audio/Animals/cat_meow.ogg
  - type: Grammar
    attributes:
      gender: epicene
  - type: Tag
    tags:
    - VimPilot

- type: entity
  name: shadow watcher
  parent: 
  - BaseShadowMob
  - FlyingMobBase 
  id: MobWatcherShadow
  description: A silent observer watching for intruders in the shadow dimension.
  components:
  - type: Sprite
    sprite: Mobs/Aliens/Lavaland/watcher.rsi
    layers:
    - state: base
      color: "#793a80dd"
    - state: unshaded
      shader: unshaded
      color: "#2d0c30dd"
    - state: unshaded-eye
      shader: unshaded
      color: "#b450bf"
  - type: Portal
    arrivalSound: /Audio/Items/hiss.ogg
    departureSound: /Audio/Items/hiss.ogg
  - type: AmbientSound
    range: 6
    volume: -3
    sound:
      path: /Audio/Ambience/anomaly_scary.ogg
  - type: Fixtures
    fixtures:
      fix1:
        shape:
          !type:PhysShapeCircle
          radius: 0.30
        density: 80
        mask:
        - FlyingMobMask
        layer:
        - FlyingMobLayer