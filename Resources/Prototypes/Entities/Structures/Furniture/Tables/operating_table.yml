# SPDX-FileCopyrightText: 2022 Deahaka <96499407+Deahaka@users.noreply.github.com>
# SPDX-FileCopyrightText: 2023 Emisse <99158783+Emisse@users.noreply.github.com>
# SPDX-FileCopyrightText: 2023 metalgearsloth <31366439+metalgearsloth@users.noreply.github.com>
# SPDX-FileCopyrightText: 2024 Tadeo <td12233a@gmail.com>
# SPDX-FileCopyrightText: 2024 gluesniffler <159397573+gluesniffler@users.noreply.github.com>
# SPDX-FileCopyrightText: 2025 mkanke-real <mikekanke@gmail.com>
# SPDX-FileCopyrightText: 2025 taydeo <td12233a@gmail.com>
#
# SPDX-License-Identifier: AGPL-3.0-or-later AND MIT

- type: entity
  id: OperatingTable
  parent: Bed
  name: operating table
  description: Used for advanced medical procedures. # Shitmed
  components:
  - type: Sprite
    sprite: Structures/Furniture/Tables/optable.rsi
    noRot: true
    layers:
      - state: operating_table
        map: ["enum.OperatingTableVisualLayers.Base"]
      - state: vitals_1
        map: ["enum.OperatingTableVisualLayers.Vitals"]
        visible: false
      - map: ["tank"]
  - type: Icon
    sprite: Structures/Furniture/Tables/optable.rsi
    state: operating_table
  - type: Appearance
  - type: PlaceableSurface
    isPlaceable: false
  - type: PointLight
    enabled: false
    radius: 6
    energy: 3
    color: "#FFFFFF"
    castShadows: false
    netsync: true
  - type: OperatingTable
  - type: OperatingTableLight
  - type: OperatingTableVisuals
  - type: GenericVisualizer
    visuals:
      enum.BedInternalsVisuals.TankVisual:
        tank:
          None:      { visible: false }
          Nitrogen:  { state: tank_1, visible: true }
          Oxygen:    { state: tank_2, visible: true }
          Generic:   { state: tank_3, visible: true }
          Plasma:    { state: tank_4, visible: true }
          Nitrous:   { state: tank_5, visible: true }
  # Begin Shitmed Changes
  - type: Construction
    graph: Machine
    node: machine
  - type: Machine
    board: OperatingTableCircuitboard
  - type: ContainerContainer
    containers:
      machine_board: !type:Container
      machine_parts: !type:Container
      gasTankSlot: !type:ContainerSlot {}
      hidden_slot: !type:ContainerSlot
  - type: ItemSlots
    slots:
      gasTankSlot:
        name: comp-gas-canister-slot-name-gas-tank
        whitelist:
          components:
            - GasTank
        insertOnInteract: true
      hidden_slot:
        name: computer_slot_accessory
        whitelist:
          tags:
          - ListeningBug
  - type: BedInternals
    slot: gasTankSlot
    maskPrototype: ClothingMaskBreathMedical
  - type: DeviceList
  - type: DeviceNetwork
    deviceNetId: Wired
  - type: DeviceLinkSource
    range: 2
    ports:
    - OperatingTable
  # End Shitmed Changes
