# SPDX-FileCopyrightText: 2025 TheSecondLord <88201625+TheSecondLord@users.noreply.github.com>
#
# SPDX-License-Identifier: AGPL-3.0-or-later

- type: entity
  name: switchblade
  parent: [BaseItem, BaseSyndicateContraband]
  id: Switchblade
  description: This is how we get the job done down in Space London.
  components:
    - type: ItemToggle
      soundActivate:
        path: /Audio/Items/unsheath.ogg
        params:
          volume: -3
      soundDeactivate:
        path: /Audio/Items/sheath.ogg
        params:
          volume: -3
    - type: ComponentToggler
      components:
      - type: Sharp
      - type: DisarmMalus
        malus: 0.6
      - type: Execution
        doAfterDuration: 4.0
    - type: ItemToggleSize
      activatedSize: Normal
    - type: Sprite
      sprite: _Funkystation/Objects/Weapons/Melee/switchblade.rsi
      layers:
        - state: icon
        - state: icon_blade
          visible: false
          map: [ "blade" ]
    - type: ItemToggleMeleeWeapon
      activatedSoundOnHit:
        path: /Audio/Weapons/bladeslice.ogg
      activatedDamage:
        types:
          Slash: 14   #21 DPS
    - type: MeleeWeapon
      wideAnimationRotation: -135
      attackRate: 1.5
      damage:
        types:
          Blunt: 1
    - type: Item
      size: Small
      sprite: _Funkystation/Objects/Weapons/Melee/switchblade.rsi
    - type: UseDelay
      delay: 0.5
    - type: Appearance
    - type: ItemTogglePointLight # This is incredibly scuffed but necessary due to toggling layers currently being linked to toggling lights
    - type: PointLight           # Todo: Change this when the visuals toggle refactor from upstream is merged
      enabled: false
      radius: 0
      energy: 0
      netsync: false
    - type: ToggleableLightVisuals
      spriteLayer: blade
      inhandVisuals:
        left:
        - state: inhand-left-blade
        right:
        - state: inhand-right-blade
