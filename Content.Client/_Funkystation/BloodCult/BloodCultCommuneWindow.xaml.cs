using Robust.Client.Input;
using Content.Client.UserInterface.Controls;
using Content.Shared.Speech;
using Robust.Client.AutoGenerated;
using Robust.Client.UserInterface.CustomControls;
using Robust.Client.UserInterface.XAML;
using Robust.Shared.Prototypes;

namespace Content.Client._Funkystation.BloodCult;

[GenerateTypedNameReferences]
public sealed partial class BloodCultCommuneWindow : FancyWindow
{
    public Action<string>? OnCommune;

    public BloodCultCommuneWindow()
    {
        RobustXamlLoader.Load(this);

        CommuneMessageSend.OnPressed += _ =>
        {
            OnCommune?.Invoke(CommuneMessage.Text);
        };

		CommuneMessage.OnTextEntered += _ =>
		{
			OnCommune?.Invoke(CommuneMessage.Text);
		};
    }

	protected override void Opened()
	{
		base.Opened();

		// Automatically highlight the commune text box for immediate typing convenience.
		CommuneMessage.GrabKeyboardFocus();
	}

    public void UpdateState(string name)
    {
        CommuneMessage.Text = name;
    }
}
